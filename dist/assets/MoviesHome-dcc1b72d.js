import{N as T}from"./NavBar-74549be8.js";import{o as i,c as l,n as r,a as d,e as u,d as k,F as v,r as y,f as L,t as f,g as m,_ as w,h as b,i as C,j as V}from"./index-ccc8581e.js";async function P(n=1){try{return await await(await fetch(`https://api.themoviedb.org/3/movie/top_rated?api_key=26b4b0ba1ea14cc6730d7cff2ef58bc6&language=en-US&page=${n}`)).json()}catch(a){throw new Error(a)}}var N=(n,a)=>{const e=n.__vccOpts||n;for(const[o,c]of a)e[o]=c;return e};const M={data(){return{innerValue:1}},props:{modelValue:{type:Number},pageCount:{type:Number,required:!0},initialPage:{type:Number,default:1},forcePage:{type:Number},clickHandler:{type:Function,default:()=>{}},pageRange:{type:Number,default:3},marginPages:{type:Number,default:1},prevText:{type:String,default:"Prev"},nextText:{type:String,default:"Next"},breakViewText:{type:String,default:"â€¦"},containerClass:{type:String,default:"pagination"},pageClass:{type:String,default:"page-item"},pageLinkClass:{type:String,default:"page-link"},prevClass:{type:String,default:"page-item"},prevLinkClass:{type:String,default:"page-link"},nextClass:{type:String,default:"page-item"},nextLinkClass:{type:String,default:"page-link"},breakViewClass:{type:String},breakViewLinkClass:{type:String},activeClass:{type:String,default:"active"},disabledClass:{type:String,default:"disabled"},noLiSurround:{type:Boolean,default:!1},firstLastButton:{type:Boolean,default:!1},firstButtonText:{type:String,default:"First"},lastButtonText:{type:String,default:"Last"},hidePrevNext:{type:Boolean,default:!1}},computed:{selected:{get:function(){return this.modelValue||this.innerValue},set:function(n){this.innerValue=n}},pages:function(){let n={};if(this.pageCount<=this.pageRange)for(let a=0;a<this.pageCount;a++){let e={index:a,content:a+1,selected:a===this.selected-1};n[a]=e}else{const a=Math.floor(this.pageRange/2);let e=t=>{let g={index:t,content:t+1,selected:t===this.selected-1};n[t]=g},o=t=>{let g={disabled:!0,breakView:!0};n[t]=g};for(let t=0;t<this.marginPages;t++)e(t);let c=0;this.selected-a>0&&(c=this.selected-1-a);let s=c+this.pageRange-1;s>=this.pageCount&&(s=this.pageCount-1,c=s-this.pageRange+1);for(let t=c;t<=s&&t<=this.pageCount-1;t++)e(t);c>this.marginPages&&o(c-1),s+1<this.pageCount-this.marginPages&&o(s+1);for(let t=this.pageCount-1;t>=this.pageCount-this.marginPages;t--)e(t)}return n}},methods:{handlePageSelected(n){this.selected!==n&&(this.innerValue=n,this.$emit("update:modelValue",n),this.clickHandler(n))},prevPage(){this.selected<=1||this.handlePageSelected(this.selected-1)},nextPage(){this.selected>=this.pageCount||this.handlePageSelected(this.selected+1)},firstPageSelected(){return this.selected===1},lastPageSelected(){return this.selected===this.pageCount||this.pageCount===0},selectFirstPage(){this.selected<=1||this.handlePageSelected(1)},selectLastPage(){this.selected>=this.pageCount||this.handlePageSelected(this.pageCount)}},beforeMount(){this.innerValue=this.initialPage},beforeUpdate(){this.forcePage!==void 0&&this.forcePage!==this.selected&&(this.selected=this.forcePage)}},H=["tabindex","innerHTML"],B=["tabindex","innerHTML"],K=["onClick","onKeyup"],F=["tabindex","innerHTML"],R=["tabindex","innerHTML"],I=["innerHTML"],O=["innerHTML"],J=["onClick","onKeyup"],j=["innerHTML"],D=["innerHTML"];function E(n,a,e,o,c,s){return e.noLiSurround?(i(),l("div",{key:1,class:r(e.containerClass)},[e.firstLastButton?(i(),l("a",{key:0,onClick:a[8]||(a[8]=t=>s.selectFirstPage()),onKeyup:a[9]||(a[9]=u(t=>s.selectFirstPage(),["enter"])),class:r([e.pageLinkClass,s.firstPageSelected()?e.disabledClass:""]),tabindex:"0",innerHTML:e.firstButtonText},null,42,I)):k("",!0),s.firstPageSelected()&&e.hidePrevNext?k("",!0):(i(),l("a",{key:1,onClick:a[10]||(a[10]=t=>s.prevPage()),onKeyup:a[11]||(a[11]=u(t=>s.prevPage(),["enter"])),class:r([e.prevLinkClass,s.firstPageSelected()?e.disabledClass:""]),tabindex:"0",innerHTML:e.prevText},null,42,O)),(i(!0),l(v,null,y(s.pages,t=>(i(),l(v,null,[t.breakView?(i(),l("a",{key:t.index,class:r([e.pageLinkClass,e.breakViewLinkClass,t.disabled?e.disabledClass:""]),tabindex:"0"},[L(n.$slots,"breakViewContent",{},()=>[m(f(e.breakViewText),1)])],2)):t.disabled?(i(),l("a",{key:t.index,class:r([e.pageLinkClass,t.selected?e.activeClass:"",e.disabledClass]),tabindex:"0"},f(t.content),3)):(i(),l("a",{key:t.index,onClick:g=>s.handlePageSelected(t.index+1),onKeyup:u(g=>s.handlePageSelected(t.index+1),["enter"]),class:r([e.pageLinkClass,t.selected?e.activeClass:""]),tabindex:"0"},f(t.content),43,J))],64))),256)),s.lastPageSelected()&&e.hidePrevNext?k("",!0):(i(),l("a",{key:2,onClick:a[12]||(a[12]=t=>s.nextPage()),onKeyup:a[13]||(a[13]=u(t=>s.nextPage(),["enter"])),class:r([e.nextLinkClass,s.lastPageSelected()?e.disabledClass:""]),tabindex:"0",innerHTML:e.nextText},null,42,j)),e.firstLastButton?(i(),l("a",{key:3,onClick:a[14]||(a[14]=t=>s.selectLastPage()),onKeyup:a[15]||(a[15]=u(t=>s.selectLastPage(),["enter"])),class:r([e.pageLinkClass,s.lastPageSelected()?e.disabledClass:""]),tabindex:"0",innerHTML:e.lastButtonText},null,42,D)):k("",!0)],2)):(i(),l("ul",{key:0,class:r(e.containerClass)},[e.firstLastButton?(i(),l("li",{key:0,class:r([e.pageClass,s.firstPageSelected()?e.disabledClass:""])},[d("a",{onClick:a[0]||(a[0]=t=>s.selectFirstPage()),onKeyup:a[1]||(a[1]=u(t=>s.selectFirstPage(),["enter"])),class:r(e.pageLinkClass),tabindex:s.firstPageSelected()?-1:0,innerHTML:e.firstButtonText},null,42,H)],2)):k("",!0),s.firstPageSelected()&&e.hidePrevNext?k("",!0):(i(),l("li",{key:1,class:r([e.prevClass,s.firstPageSelected()?e.disabledClass:""])},[d("a",{onClick:a[2]||(a[2]=t=>s.prevPage()),onKeyup:a[3]||(a[3]=u(t=>s.prevPage(),["enter"])),class:r(e.prevLinkClass),tabindex:s.firstPageSelected()?-1:0,innerHTML:e.prevText},null,42,B)],2)),(i(!0),l(v,null,y(s.pages,t=>(i(),l("li",{key:t.index,class:r([e.pageClass,t.selected?e.activeClass:"",t.disabled?e.disabledClass:"",t.breakView?e.breakViewClass:""])},[t.breakView?(i(),l("a",{key:0,class:r([e.pageLinkClass,e.breakViewLinkClass]),tabindex:"0"},[L(n.$slots,"breakViewContent",{},()=>[m(f(e.breakViewText),1)])],2)):t.disabled?(i(),l("a",{key:1,class:r(e.pageLinkClass),tabindex:"0"},f(t.content),3)):(i(),l("a",{key:2,onClick:g=>s.handlePageSelected(t.index+1),onKeyup:u(g=>s.handlePageSelected(t.index+1),["enter"]),class:r(e.pageLinkClass),tabindex:"0"},f(t.content),43,K))],2))),128)),s.lastPageSelected()&&e.hidePrevNext?k("",!0):(i(),l("li",{key:2,class:r([e.nextClass,s.lastPageSelected()?e.disabledClass:""])},[d("a",{onClick:a[4]||(a[4]=t=>s.nextPage()),onKeyup:a[5]||(a[5]=u(t=>s.nextPage(),["enter"])),class:r(e.nextLinkClass),tabindex:s.lastPageSelected()?-1:0,innerHTML:e.nextText},null,42,F)],2)),e.firstLastButton?(i(),l("li",{key:3,class:r([e.pageClass,s.lastPageSelected()?e.disabledClass:""])},[d("a",{onClick:a[6]||(a[6]=t=>s.selectLastPage()),onKeyup:a[7]||(a[7]=u(t=>s.selectLastPage(),["enter"])),class:r(e.pageLinkClass),tabindex:s.lastPageSelected()?-1:0,innerHTML:e.lastButtonText},null,42,R)],2)):k("",!0)],2))}var U=N(M,[["render",E]]);const q={name:"MoviesHome",components:{paginate:U,navbar:T},data:()=>({movies:{},favList:JSON.parse(localStorage.getItem("favList"))}),created(){P().then(n=>{this.movies=n})},methods:{clickCallback:function(n){P(n).then(a=>{this.movies=a})},makeItFav:function(n,a){var e;!this.favList||this.favList.length===0?(this.favList=JSON.stringify([n]),localStorage.setItem("favList",this.favList)):((e=a.explicitOriginalTarget)!=null&&e.checked?this.favList=JSON.stringify([...this.favList,n]):this.favList=JSON.stringify(this.favList.filter(o=>o.id!==n.id)),localStorage.setItem("favList",this.favList))},isChecked:function(n){if(this.favList=JSON.parse(localStorage.getItem("favList")),this.favList&&this.favList.length>0)return this.favList.some(a=>a.id===n)}}},z={key:0,class:"movies-wrapper"},A=d("h1",null,"Welcome to Movie App",-1),W={class:"text-end"},G=d("strong",null,"Results: ",-1),Q={class:"row g-3"},X={class:"col-12 col-sm-6 col-md-4 d-flex align-items-stretch"},Y={class:"card"},Z=["src","alt"],p={class:"card-body"},$={class:"card-title"},ee={class:"card-footer"},te={class:"form-check form-switch"},ae=["id","onChange","checked"],se=["for"],ne={key:1,class:"loader-wrapper"},ie=d("h1",null,"Loading...",-1),le=[ie];function re(n,a,e,o,c,s){var x;const t=b("navbar"),g=b("paginate"),S=b("router-link");return i(),l(v,null,[d("header",null,[C(t)]),n.movies?(i(),l("div",z,[A,d("p",W,[G,d("span",null,f(n.movies.page*((x=n.movies.results)==null?void 0:x.length))+" of ",1),d("span",null,f(n.movies.total_results),1)]),C(g,{"page-count":500,"page-range":3,"margin-pages":2,"click-handler":s.clickCallback,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item"},null,8,["click-handler"]),d("div",Q,[(i(!0),l(v,null,y(n.movies.results,h=>(i(),l("div",X,[d("div",Y,[d("img",{src:`https://image.tmdb.org/t/p/w500/${h.poster_path}`,class:"card-img-top",alt:h.title},null,8,Z),d("div",p,[d("h2",$,f(h.title),1),C(S,{to:{name:"Movie",params:{id:h.id}},class:"btn btn-primary"},{default:V(()=>[m("Details")]),_:2},1032,["to"])]),d("div",ee,[d("div",te,[d("input",{class:"form-check-input",type:"checkbox",role:"switch",id:`fav${h.id}`,onChange:_=>s.makeItFav(h,_),checked:s.isChecked(h.id)},null,40,ae),d("label",{class:"form-check-label",for:`fav${h.id}`},"Make this film your favorite",8,se)])])])]))),256))]),C(g,{class:"my-2","page-count":500,"page-range":3,"margin-pages":2,"click-handler":s.clickCallback,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item"},null,8,["click-handler"])])):(i(),l("div",ne,le))],64)}const ge=w(q,[["render",re]]);export{ge as default};
